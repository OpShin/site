(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[218],{5096:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-manual/smart_contract_tour/advanced",function(){return n(8602)}])},8602:function(e,s,n){"use strict";n.r(s),n.d(s,{__toc:function(){return l}});var t=n(5893),a=n(2673),i=n(2197),o=n(8426);n(9128);var r=n(2643);let l=[{depth:3,value:"Compiler Flags",id:"compiler-flags"},{depth:3,value:"Optimization Levels",id:"optimization-levels"},{depth:3,value:"Constant Folding",id:"constant-folding"},{depth:3,value:"Multi-Purpose Contracts",id:"multi-purpose-contracts"},{depth:3,value:"Checking the integrity of objects",id:"checking-the-integrity-of-objects"}];function _createMdxContent(e){let s=Object.assign({h1:"h1",p:"p",h3:"h3",code:"code",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",ul:"ul",li:"li",pre:"pre",span:"span",a:"a",blockquote:"blockquote",em:"em"},(0,r.a)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{children:"Advanced Topics"}),"\n",(0,t.jsx)(s.p,{children:"This section contains a few selected, advanced use cases of OpShin."}),"\n",(0,t.jsx)(s.h3,{id:"compiler-flags",children:"Compiler Flags"}),"\n",(0,t.jsxs)(s.p,{children:["OpShin provides several flags that enable, control or disable optimizations.\nConcretely the following flags are available (visible when calling ",(0,t.jsx)(s.code,{children:"opshin --help"}),"):"]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Flag"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"-fcompress-patterns"})}),(0,t.jsx)(s.td,{children:"Enables the compression of re-occurring code patterns. Can reduce memory and CPU steps but increases the size of the compiled contract."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"-fiterative-unfold-patterns"})}),(0,t.jsx)(s.td,{children:"Enables iterative unfolding of patterns. Improves application of pattern optimization but is very slow."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"-fconstant-index-access-list"})}),(0,t.jsx)(s.td,{children:"Replace index accesses with constant parameters with optimized constant accesses. Reduces memory and CPU steps but increases the size of the compiled contract."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"-fconstant-folding"}),", ",(0,t.jsx)(s.code,{children:"--cf"})]}),(0,t.jsx)(s.td,{children:"Enables experimental constant folding, including propagation and code execution. See below for a detailed explanation."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"-fremove-dead-code"})}),(0,t.jsx)(s.td,{children:"Removes dead code and variables from the contract."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"-ffast-access-skip FAST_ACCESS_SKIP"})}),(0,t.jsx)(s.td,{children:"How many steps to skip for fast list index access, default None means no steps are skipped (useful if long lists are common)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"-fdeduplicate"})}),(0,t.jsx)(s.td,{children:"Removes duplicated parts of the AST from the lowest level program representation, the UPLC level. This can slightly increase execution cost at a significant reduction of size"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"-fremove-traces"})}),(0,t.jsx)(s.td,{children:"Removes all error messages, print statements and other traces from the program. As OpShin usually prints extensive debug information, this significantly reduces contract size, but makes debugging much harder."})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"optimization-levels",children:"Optimization Levels"}),"\n",(0,t.jsx)(s.p,{children:"OpShin, similar to C-compilers, features optimization levels. These control which optimizations are applied to the generated code to make it smaller and more performant, but at the same time more difficult to debug.\nThe levels reach from 0 to 3, where higher numbers indicate more optimizations.\nHowever, as opposed to C-programs, there are not yet many debugging tools that require non-optimized ode.\nThus, as a typical user, optimizing less than level 2 will not bring any debugging benefits.\nTherefore, OpShin per default optimizes at level 2.\nLevel 3 enables some slow optimizations and in theory allows optimizations that change the semantics, i.e., the behavior, of the contract.\nIn practice, this will never have more of an effect than removing print statements or assertion messages.\nHowever, these messages are quite useful in practice and thus level 3 should not be enabled unless the contract has been thoroughly tested."}),"\n",(0,t.jsx)(s.p,{children:"The following optimizations are enabled by each optimization level (where each optimization level contains all optimizations of the lower optimizations):"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"O0"}),": None"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"O1"}),":","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"-fcompress-patterns"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"-fconstant-index-access-list"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"-fremove-dead-code"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"O2"}),":","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"-fconstant-folding"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"-ffast-access-skip 5"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"O3"}),":","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"-fiterative-unfold-patterns"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"-fdeduplicate"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"-fremove-traces"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Flags can be overridden by passing them specifically after specifying an optimization level, e.g., ",(0,t.jsx)(s.code,{children:"opshin build ... -O2 -ffast-access-skip 2"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"constant-folding",children:"Constant Folding"}),"\n",(0,t.jsxs)(s.p,{children:["OpShin supports the command-line flag ",(0,t.jsx)(s.code,{children:"--constant-folding"})," or short ",(0,t.jsx)(s.code,{children:"--cf"}),".\nWith this flag, every expression is evaluated at compile time\nby the python ",(0,t.jsx)(s.code,{children:"eval"})," command.\nOn one hand this enables the precomputation of expensive constants in your code.\nSpecifically it evaluates all expressions that invoke only constants or variables that are\ndeclared exactly once in the contract.\n",(0,t.jsx)(s.code,{children:"print"})," statements are not pre-evaluated.\nFor example, the following expressions would be folded at compile time:"]}),"\n",(0,t.jsx)(s.pre,{"data-language":"python","data-theme":"default",hasCopyCode:!0,children:(0,t.jsxs)(s.code,{"data-language":"python","data-theme":"default",children:[(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# evaluates to False"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"@dataclass"})}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"A"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"PlutusData"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    a"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"int"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    b"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"bytes"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"A"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"b"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'""'}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# evaluates to the object"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"foo"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"x"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"):"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" x"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"foo"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# evaluates to 0"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"bar "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"2"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"bar "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"bar "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"+"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"# is not evaluated at compile time"})]})]})}),"\n",(0,t.jsx)(s.h3,{id:"multi-purpose-contracts",children:"Multi-Purpose Contracts"}),"\n",(0,t.jsxs)(s.p,{children:["Multi-Purpose contracts are special contracts that can act for different purposes, for example as Spending verification and as Minting verification contract. The benefit is that the contract's hash stays the same for the different purposes, allowing to derive the minting policy and the contract spending address across purposes. An example of such a contract is the ",(0,t.jsx)(s.a,{href:"https://github.com/OpShin/opshin/blob/main/examples/smart_contracts/wrapped_token.py",children:'"Wrapped Token" contract'}),", which allows minting a specific token if funds are deposited at its spending address."]}),"\n",(0,t.jsx)(s.p,{children:"By default in PlutusV3, all contracts can act as multi-purpose contracts."}),"\n",(0,t.jsx)(s.p,{children:"When building a transaction that executes your smart contract,\nyou need to explicitly add your contract for each minting, spending etc invocation in your final transaction. The contract will be called several times during the transaction, with different parameters in Datum, Redeemer and Purpose, depending on your configuration."}),"\n",(0,t.jsx)(s.h3,{id:"checking-the-integrity-of-objects",children:"Checking the integrity of objects"}),"\n",(0,t.jsxs)(s.p,{children:["OpShin never checks that an object adheres to the structure that is declared for its parameters.\nThe simple reason is that this is costly and usually not necessary.\nMost of the time an equality comparison (",(0,t.jsx)(s.code,{children:"=="}),") between PlutusData objects\nis sufficient (and fast)."]}),"\n",(0,t.jsxs)(s.p,{children:["There are cases where you want to ensure the integrity of a datum however.\nFor example in an AMM setting where the pool datum will be re-used and potentially re-written\nin subsequent calls.\nIn order to prevent malicious actors from making the datum too big to fit in subsequent transactions\nor to prevent them from writing values of invalid types into the object, you may use ",(0,t.jsx)(s.a,{href:"https://github.com/OpShin/opshin/blob/main/opshin/std/integrity.py#L7",children:(0,t.jsx)(s.code,{children:"check_integrity"})}),"."]}),"\n",(0,t.jsx)(s.p,{children:"An example use case is found below.\nThis contract will fail if anything but a PlutusData object with constructor id 2\nand two fields, first integer and second bytes, is passed as a datum into the contract."}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:["Note: Yes, this implies that without the explicit check the contract may pass with whatever\ntype datum ",(0,t.jsx)(s.em,{children:"actually"})," is, since its fields or constructor id are never explicitly accessed."]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{"data-language":"python","data-theme":"default",hasCopyCode:!0,children:(0,t.jsxs)(s.code,{"data-language":"python","data-theme":"default",children:[(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" opshin"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"prelude "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"*"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" opshin"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"std"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"."}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"integrity "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" check_integrity"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsx)(s.span,{className:"line",children:(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"@dataclass"})}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"SomeDatum"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"PlutusData"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"CONSTR_ID"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" = 2"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"a"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:": "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"int"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    b"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"bytes"})]}),"\n",(0,t.jsx)(s.span,{className:"line",children:" "}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"def"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"validator"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-parameter)"},children:"context"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ScriptContext):"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    datum"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" SomeDatum "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"own_datum_unsafe"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(context)"})]}),"\n",(0,t.jsxs)(s.span,{className:"line",children:[(0,t.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"check_integrity"}),(0,t.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:"(datum)"})]})]})})]})}let c={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,r.a)(),e.components);return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"src/pages/user-manual/smart_contract_tour/advanced.mdx",route:"/user-manual/smart_contract_tour/advanced",timestamp:1762344315e3,pageMap:[{kind:"Meta",data:{index:{title:"OpShin",type:"page",display:"hidden",theme:{layout:"raw"}},"user-manual":{title:"Documentation",type:"page",href:"/user-manual/introduction"},playground:{title:"Playground",type:"page",href:"https://playground.opshin.dev"},credits:{title:"About",display:"hidden",theme:{breadcrumb:!1,footer:!0,sidebar:!1,toc:!1,pagination:!1}}}},{kind:"MdxPage",name:"index",route:"/",frontMatter:{title:"Cardano Smart Contracts in Python"}},{kind:"Folder",name:"user-manual",route:"/user-manual",children:[{kind:"Meta",data:{index:"Introduction",getting_started:"Getting Started",eutxo_crash_course:"Understanding EUTXO",language_tour:{title:"Language Tour"},smart_contract_tour:{title:"Smart Contract Tour"},common_issues:"Common Issues",what_i_wish_i_knew:"What I Wish I Knew",additional_resources:"Additional Resources"}},{kind:"MdxPage",name:"additional_resources",route:"/user-manual/additional_resources"},{kind:"MdxPage",name:"common_issues",route:"/user-manual/common_issues"},{kind:"MdxPage",name:"eutxo_crash_course",route:"/user-manual/eutxo_crash_course"},{kind:"MdxPage",name:"getting_started",route:"/user-manual/getting_started"},{kind:"MdxPage",name:"index",route:"/user-manual",frontMatter:{title:"Introduction"}},{kind:"Folder",name:"language_tour",route:"/user-manual/language_tour",children:[{kind:"Meta",data:{index:"Overview",structure:"Structure",primitive_types:"Primitive Types",container_types:"Container Types",classes:"Classes",variables:"Variables",conditional_statements:"Conditional Statements",loop_statements:"Loop Statements",functions:"Functions",builtins:"Builtins",stdlib:{title:"Standard Library",type:"page",href:"https://opshin.opshin.dev/opshin/std/index.html",newWindow:!0}}},{kind:"MdxPage",name:"builtins",route:"/user-manual/language_tour/builtins"},{kind:"MdxPage",name:"classes",route:"/user-manual/language_tour/classes"},{kind:"MdxPage",name:"conditional_statements",route:"/user-manual/language_tour/conditional_statements"},{kind:"MdxPage",name:"container_types",route:"/user-manual/language_tour/container_types"},{kind:"MdxPage",name:"functions",route:"/user-manual/language_tour/functions"},{kind:"MdxPage",name:"index",route:"/user-manual/language_tour"},{kind:"MdxPage",name:"loop_statements",route:"/user-manual/language_tour/loop_statements"},{kind:"MdxPage",name:"primitive_types",route:"/user-manual/language_tour/primitive_types"},{kind:"MdxPage",name:"structure",route:"/user-manual/language_tour/structure"},{kind:"MdxPage",name:"variables",route:"/user-manual/language_tour/variables"}]},{kind:"Folder",name:"smart_contract_tour",route:"/user-manual/smart_contract_tour",children:[{kind:"Meta",data:{index:"Overview",validator_scripts:"Validator Scripts",the_scriptcontext:"The ScriptContext",handling_time:"Handling Time",migration_v3:"Migrating to PlutusV3",common_design_patterns:"Common Design Patterns",advanced:"Advanced Topics",ledger_def:{title:"Ledger Definitions",type:"page",href:"https://opshin.opshin.dev/opshin/ledger/index.html",newWindow:!0},examples:{title:"Examples",type:"page",href:"https://github.com/OpShin/awesome-opshin/#examples",newWindow:!0}}},{kind:"MdxPage",name:"advanced",route:"/user-manual/smart_contract_tour/advanced"},{kind:"MdxPage",name:"common_design_patterns",route:"/user-manual/smart_contract_tour/common_design_patterns"},{kind:"MdxPage",name:"handling_time",route:"/user-manual/smart_contract_tour/handling_time"},{kind:"MdxPage",name:"index",route:"/user-manual/smart_contract_tour"},{kind:"MdxPage",name:"migration_v3",route:"/user-manual/smart_contract_tour/migration_v3"},{kind:"MdxPage",name:"the_scriptcontext",route:"/user-manual/smart_contract_tour/the_scriptcontext"},{kind:"MdxPage",name:"validator_scripts",route:"/user-manual/smart_contract_tour/validator_scripts"}]},{kind:"MdxPage",name:"what_i_wish_i_knew",route:"/user-manual/what_i_wish_i_knew"}]}],flexsearch:{codeblocks:!0},readingTime:{text:"5 min read",minutes:4.055,time:243300,words:811},title:"Advanced Topics",headings:l},pageNextRoute:"/user-manual/smart_contract_tour/advanced",nextraLayout:i.ZP,themeConfig:o.Z};s.default=(0,a.j)(c)},8426:function(e,s,n){"use strict";var t=n(5893),a=n(5379),i=n.n(a),o=n(2197),r=n(2010);let l={logo:()=>{let{resolvedTheme:e}=(0,r.F)();return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("img",{style:{height:"var(--nextra-navbar-height)"},src:"light"===e?"/logo-dark.png":"/logo.png"})})},head:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("link",{rel:"icon",type:"image/x-icon",href:"/favicon.ico"}),(0,t.jsx)("meta",{name:"twitter:image",content:"https://opshin.dev/open-graph.jpg"}),(0,t.jsx)("meta",{name:"twitter:site:domain",content:"opshin.dev"})]}),project:{link:"https://github.com/opshin"},chat:{link:"https://discord.com/invite/umR3A2g4uw"},search:{placeholder:"Search the docs...",emptyResult:null,error:"",loading:null},toc:{extraContent:(0,t.jsx)(t.Fragment,{})},i18n:[{locale:"en",text:"English"}],docsRepositoryBase:"https://github.com/opshin/site/blob/main",useNextSeoProps(){let{title:e}=(0,o.ZR)(),s="Cardano Smart Contracts in Python";return{titleTemplate:"OpShin | %s",description:s,canonical:"https://opshin.dev/",openGraph:{url:"https://opshin.dev/",description:s,images:[{url:"https://opshin.dev/open-graph.jpg",width:800,height:418,alt:"OpShin - Cardano Smart Contracts in Python",type:"image/jpg"}]},siteName:"OpShin",twitter:{handle:"@OpShinDev",site:"https://opshin.dev",cardType:"summary_large_image"}}},footer:{component:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("footer",{className:"jsx-111148e9a1b1c3f",children:[(0,t.jsxs)("aside",{className:"jsx-111148e9a1b1c3f",children:[(0,t.jsx)("img",{src:"/typo.webp",className:"jsx-111148e9a1b1c3f"}),(0,t.jsx)("p",{className:"jsx-111148e9a1b1c3f",children:"Build without limits"})]}),(0,t.jsxs)("nav",{className:"jsx-111148e9a1b1c3f",children:[(0,t.jsxs)("h2",{className:"jsx-111148e9a1b1c3f",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"jsx-111148e9a1b1c3f",children:[(0,t.jsx)("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",className:"jsx-111148e9a1b1c3f"}),(0,t.jsx)("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",className:"jsx-111148e9a1b1c3f"})]})," Quick Links"]}),(0,t.jsxs)("ul",{className:"jsx-111148e9a1b1c3f",children:[(0,t.jsx)("li",{className:"jsx-111148e9a1b1c3f",children:(0,t.jsx)("a",{href:"https://github.com/OpShin/opshin-starter-kit",className:"jsx-111148e9a1b1c3f",children:"Starter Kit"})}),(0,t.jsx)("li",{className:"jsx-111148e9a1b1c3f",children:(0,t.jsx)("a",{href:"https://github.com/OpShin/opshin-pioneer-program",className:"jsx-111148e9a1b1c3f",children:"Pioneer Program"})}),(0,t.jsx)("li",{className:"jsx-111148e9a1b1c3f",children:(0,t.jsx)("a",{href:"/user-manual",className:"jsx-111148e9a1b1c3f",children:"User Documentation"})}),(0,t.jsx)("li",{className:"jsx-111148e9a1b1c3f",children:(0,t.jsx)("a",{href:"https://opshin.opshin.dev/opshin/",className:"jsx-111148e9a1b1c3f",children:"API Docs"})})]})]}),(0,t.jsxs)("nav",{className:"jsx-111148e9a1b1c3f",children:[(0,t.jsxs)("h2",{className:"jsx-111148e9a1b1c3f",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"jsx-111148e9a1b1c3f",children:(0,t.jsx)("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z",className:"jsx-111148e9a1b1c3f"})}),"Community"]}),(0,t.jsxs)("ul",{className:"jsx-111148e9a1b1c3f",children:[(0,t.jsx)("li",{className:"jsx-111148e9a1b1c3f",children:(0,t.jsx)("a",{href:"https://discord.com/invite/umR3A2g4uw",className:"jsx-111148e9a1b1c3f",children:"Discord"})}),(0,t.jsx)("li",{className:"jsx-111148e9a1b1c3f",children:(0,t.jsx)("a",{href:"https://twitter.com/OpShinDev",className:"jsx-111148e9a1b1c3f",children:"Twitter"})}),(0,t.jsx)("li",{className:"jsx-111148e9a1b1c3f",children:(0,t.jsx)("a",{href:"https://github.com/OpShin",className:"jsx-111148e9a1b1c3f",children:"GitHub"})})]})]}),(0,t.jsxs)("nav",{className:"jsx-111148e9a1b1c3f",children:[(0,t.jsxs)("h2",{className:"jsx-111148e9a1b1c3f",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"jsx-111148e9a1b1c3f",children:[(0,t.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2",className:"jsx-111148e9a1b1c3f"}),(0,t.jsx)("circle",{cx:"9",cy:"7",r:"4",className:"jsx-111148e9a1b1c3f"}),(0,t.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87",className:"jsx-111148e9a1b1c3f"}),(0,t.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75",className:"jsx-111148e9a1b1c3f"})]}),"Partners"]}),(0,t.jsxs)("ul",{className:"jsx-111148e9a1b1c3f",children:[(0,t.jsx)("li",{className:"jsx-111148e9a1b1c3f",children:(0,t.jsx)("a",{href:"https://emurgo.io/",className:"jsx-111148e9a1b1c3f",children:"Emurgo"})}),(0,t.jsx)("li",{className:"jsx-111148e9a1b1c3f",children:(0,t.jsx)("a",{href:"https://inversion.dev",className:"jsx-111148e9a1b1c3f",children:"Inversion.Dev"})}),(0,t.jsx)("li",{className:"jsx-111148e9a1b1c3f",children:(0,t.jsx)("a",{href:"https://muesliswap.com",className:"jsx-111148e9a1b1c3f",children:"MuesliSwap"})})]})]})]}),(0,t.jsx)(i(),{id:"111148e9a1b1c3f",children:"footer.jsx-111148e9a1b1c3f{background:#0067b4;color:#fff;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:0 auto;padding:2rem 12.5vw}footer.jsx-111148e9a1b1c3f aside.jsx-111148e9a1b1c3f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;font-variant:small-caps;font-size:.75em}footer.jsx-111148e9a1b1c3f aside.jsx-111148e9a1b1c3f p.jsx-111148e9a1b1c3f{padding:0 .15rem}footer.jsx-111148e9a1b1c3f aside.jsx-111148e9a1b1c3f img.jsx-111148e9a1b1c3f{width:4rem;height:auto}@media(max-width:1e3px){footer.jsx-111148e9a1b1c3f{padding:2rem 5%}}@media(max-width:600px){footer.jsx-111148e9a1b1c3f{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}footer.jsx-111148e9a1b1c3f aside.jsx-111148e9a1b1c3f+nav.jsx-111148e9a1b1c3f,footer.jsx-111148e9a1b1c3f nav.jsx-111148e9a1b1c3f+nav.jsx-111148e9a1b1c3f{margin-top:1rem}}footer.jsx-111148e9a1b1c3f nav.jsx-111148e9a1b1c3f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}footer.jsx-111148e9a1b1c3f nav.jsx-111148e9a1b1c3f h2.jsx-111148e9a1b1c3f{font-weight:bold;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;margin-bottom:.35rem}footer.jsx-111148e9a1b1c3f nav.jsx-111148e9a1b1c3f h2.jsx-111148e9a1b1c3f>svg.jsx-111148e9a1b1c3f{width:1em;height:auto;margin-right:.5rem}footer.jsx-111148e9a1b1c3f nav.jsx-111148e9a1b1c3f ul.jsx-111148e9a1b1c3f{font-size:.9em}"})]})}};s.Z=l},5789:function(){}},function(e){e.O(0,[774,915,888,179],function(){return e(e.s=5096)}),_N_E=e.O()}]);